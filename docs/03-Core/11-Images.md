# Images
Images are represented in an abstract form that requires conversion before displaying on the UI. The Navigation SDK provides the following image classes: `Img`, `AbstractGeometryImg`, `LaneImg`, `SignpostImg`, and `RoadInfoImg`.

All image classes provide these methods and properties:

- `uid` - Gets the unique ID of the image. Identical images share the same UID, allowing you to optimize UI redraws by triggering updates only when the image changes
- `isValid` - Verifies if the image data is valid. Invalid images return `null` from rendering methods
- `getRenderableImageBytes` - Returns a `Uint8List` that can be displayed using the `Image.memory` constructor. Returns `null` if invalid
- `getRenderableImage` - Returns a `RenderableImg` containing the image size and `Uint8List` for UI rendering. Returns `null` if invalid

## Work with plain images
The `Img` class represents plain (usually non-vector) images. These images have a recommended size and aspect ratio but can be resized to any dimension (with possible quality loss).

You can instantiate an `Img` class using:

- **Constructor** - Pass `Uint8List` image data and format
- **`fromAsset` method** - Pass the asset key (and optionally a custom bundle)

## Work with vector images
The `AbstractGeometryImg`, `LaneImg`, `SignpostImg`, and `RoadInfoImg` classes represent vector images generated by the SDK. They provide customizable rendering options and do not have a default size or aspect ratio.

The `LaneImg`, `SignpostImg`, and `RoadInfoImg` classes render best at specific aspect ratios depending on content. To render images at a suitable size chosen by the SDK, set the `allowResize` parameter to true in the `getRenderableImage` or `getRenderableImageBytes` methods. When set to false, rendering uses your exact specified size (which may cause distortion).

> ðŸ’¡ **Tip:** Use `getRenderableImage` instead of `getRenderableImageBytes` when setting `allowResize` to `true`. This provides the actual rendered image size within the `RenderableImg` class.

### Image type comparison
| Class | Size and aspect ratio | Customizable render options | Rendered image size behavior | Instantiable by the user |
|------|------------------------|-----------------------------|------------------------------|--------------------------|
| `Img` | Usually fixed and retrievable via the `size` and `aspectRatio` getters. | Not available | Always renders at the size specified by the user, if provided; otherwise at the recommended size for the image. | Yes. Via the constructor or the `fromAsset` static method. Can also be provided by the SDK. |
| `AbstractGeometryImg` | Generated by the SDK. Size and aspect ratio are not retrievable. | Yes, via `AbstractGeometryImageRenderSettings` | Renders at the size specified by the user, if provided; otherwise at the SDK default image size. | No. Provided only by the SDK. |
| `LaneImg` | Generated by the SDK. Size and aspect ratio are not retrievable. | Yes, via `LaneImageRenderSettings` | If `allowResize` is `false`, renders at the specified size. If `allowResize` is `true`, the SDK adjusts the aspect ratio based on the provided size. | No. Provided only by the SDK. |
| `SignpostImg` | Generated by the SDK. Size and aspect ratio are not retrievable. | Yes, via `SignpostImageRenderSettings` | If `allowResize` is `false`, renders at the specified size. If `allowResize` is `true`, the SDK adjusts the aspect ratio based on the provided size. | No. Provided only by the SDK. |
| `RoadInfoImg` | Generated by the SDK. Size and aspect ratio are not retrievable. | Background color customizable via `Color` | If `allowResize` is `false`, renders at the specified size. If `allowResize` is `true`, the SDK adjusts the aspect ratio based on the provided size. | No. Provided only by the SDK. |

> ðŸ’¡ **Tip:** For debugging, encode `Uint8List` images as Base64 strings using `base64Encode` and view them on a Base64 [image decoding website](/link:https://base64.guru/converter/decode/image).


## Render images
The following approaches show how to get images in `Uint8List` format from the SDK, illustrated using the lane image from `NavigationInstruction`. The same principles apply to all image types.

### Use the direct method
```
Uint8List? imageData = instruction.getLaneImage(
    size: const Size(200, 100),
    format: ImageFileFormat.png,
);
```
This approach is simple with minimal code. However, it has limitations:

- Images always render at your explicitly requested size (automatic resizing not available)
- Recommended image size based on content is not retrievable
- Image UID is not accessible

The `getLaneImage` method returns `null` if the image is invalid.

### Use getRenderableImageBytes
```
LaneImg laneImage = instruction.laneImg;
Uint8List? imageData = laneImage.getRenderableImageBytes(
    size: const Size(200, 100), 
    format: ImageFileFormat.png, 
    allowResize: true
);

// Access the image UID
int uid = laneImage.uid;
```

This approach allows you to configure the `allowResize` parameter but does not provide metadata about the `Uint8List` image:

- **When `allowResize` is true** - The image may be resized to a more suitable size that differs from your requested dimensions. However, the actual size is not exposed
- **When `allowResize` is false** - The image renders at your exact requested size, though it may have an improper aspect ratio

You can use the image UID to optimize redraws efficiently.

The `getRenderableImageBytes` method returns `null` if the image is invalid.

### Use getRenderableImage
```
LaneImg laneImage = instruction.laneImg;
RenderableImg? renderableImage = laneImage.getRenderableImage(
    size: const Size(200, 100), 
    format: ImageFileFormat.png, 
    allowResize: true
);
Uint8List? imageData = renderableImage?.bytes;

// Access the image UID
int uid = laneImage.uid;

// Get the actual rendered size
int? width = renderableImage?.width;
int? height = renderableImage?.height;
```
This approach provides the most flexibility by allowing you to configure the `allowResize` parameter and access metadata about the `Uint8List` image:

- **When `allowResize` is true** - The image may be resized to a more suitable size that differs from your original request. Access the actual dimensions via the `RenderableImg` object
- **When `allowResize` is false** - The image renders at your exact requested size, though it may have an unsuitable aspect ratio

You can leverage the image UID to optimize redraw operations efficiently.

The `getRenderableImage` method returns `null` if the image is invalid.